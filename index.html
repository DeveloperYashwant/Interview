<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interview Questions Manager</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body { transition: 0.3s; }
        .hidden { display: none; }
    </style>
</head>
<body class="bg-light">
    <div class="container mt-4">
        <h2 class="text-center">Interview Questions Bank</h2>

        <!-- Select Options -->
        <div class="row g-3">
            <div class="col-md-6">
                <select id="languageSelect" class="form-select">
                    <option value="">Select Technology</option>
                    <option value="c">C Programming</option>
                    <option value="cpp">C++</option>
                    <option value="python">Python</option>
                    <option value="webdev">Web Development</option>
                    <option value="mern">MERN Stack</option>
                    <option value="angular">Angular</option>
                    <option value="java">Java</option>
                    <option value="advjava">Advanced Java</option>
                    <option value="springboot">Spring Boot</option>
                    <option value="datascience">Data Science</option>
                    <option value="ml">Machine Learning</option>
                    <option value="cloud">Cloud Computing</option>
                    <option value="devops">DevOps</option>
                </select>
            </div>
            <div class="col-md-6">
                <select id="levelSelect" class="form-select">
                    <option value="">Select Difficulty</option>
                    <option value="beginner">Beginner</option>
                    <option value="intermediate">Intermediate</option>
                    <option value="expert">Expert</option>
                </select>
            </div>
        </div>

        <hr>

        <!-- Bulk Questions Input -->
        <textarea id="bulkQuestions" class="form-control" rows="4" placeholder='Enter JSON format: [{"question":"Q1", "answer":"A1"}, {"question":"Q2", "answer":"A2"}]'></textarea>
        <button id="addBulkBtn" class="btn btn-primary w-100 mt-2">âž• Add Questions</button>

        <hr>

        <!-- Display Questions -->
        <h5>Available Questions</h5>
        <ul id="questionsList" class="list-group"></ul>

        <hr>

        <!-- Download Buttons -->
        <button id="savePDF" class="btn btn-danger w-100">ðŸ“„ Download as PDF</button>
        <button id="clearData" class="btn btn-warning w-100 mt-2">ðŸ—‘ Clear All Questions</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let questions = JSON.parse(localStorage.getItem("questions")) || {};

            function displayQuestions() {
                const lang = document.getElementById("languageSelect").value;
                const level = document.getElementById("levelSelect").value;
                const list = document.getElementById("questionsList");
                list.innerHTML = "";

                if (!lang || !level) {
                    list.innerHTML = "<li class='list-group-item'>Select a language & level to view questions.</li>";
                    return;
                }

                (questions[lang]?.[level] || []).forEach((item, index) => {
                    const li = document.createElement("li");
                    li.classList.add("list-group-item");
                    li.innerHTML = `<b>${index + 1}. ${item.question}</b><br> <i>Answer:</i> ${item.answer}`;
                    list.appendChild(li);
                });
            }

            document.getElementById("addBulkBtn").addEventListener("click", function () {
                const lang = document.getElementById("languageSelect").value;
                const level = document.getElementById("levelSelect").value;
                let inputData = document.getElementById("bulkQuestions").value.trim();

                if (!lang || !level || !inputData) {
                    alert("Select language, level & enter valid JSON!");
                    return;
                }

                try {
                    let newQuestions = JSON.parse(inputData);
                    if (!Array.isArray(newQuestions)) throw "Invalid format";

                    questions[lang] = questions[lang] || {};
                    questions[lang][level] = questions[lang][level] || [];
                    questions[lang][level].push(...newQuestions);

                    localStorage.setItem("questions", JSON.stringify(questions));
                    document.getElementById("bulkQuestions").value = "";
                    displayQuestions();
                } catch (e) {
                    alert("Invalid JSON format!");
                }
            });

            document.getElementById("savePDF").addEventListener("click", function () {
                const lang = document.getElementById("languageSelect").value;
                const level = document.getElementById("levelSelect").value;
                if (!lang || !level) {
                    alert("Select a language & level first!");
                    return;
                }

                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                let y = 20;

                doc.setFont("helvetica", "bold");
                doc.setFontSize(16);
                doc.text("Interview Questions", 10, y);
                y += 10;

                doc.setFontSize(12);
                doc.text(`Technology: ${lang.toUpperCase()} | Level: ${level.toUpperCase()}`, 10, y);
                y += 10;

                doc.setFont("helvetica", "normal");
                doc.setFontSize(12);

                (questions[lang]?.[level] || []).forEach((item, index) => {
                    if (y > 270) {
                        doc.addPage();
                        y = 20;
                    }

                    doc.setFont("helvetica", "bold");
                    doc.text(`${index + 1}. ${item.question}`, 10, y);
                    y += 6;

                    doc.setFont("helvetica", "normal");
                    let splitAnswer = doc.splitTextToSize(`Answer: ${item.answer}`, 180);
                    doc.text(splitAnswer, 12, y);
                    y += splitAnswer.length * 6 + 6;
                });

                doc.save(`Interview_Questions_${lang}_${level}.pdf`);
            });

            document.getElementById("clearData").addEventListener("click", function () {
                if (confirm("Are you sure? This will delete ALL saved questions!")) {
                    localStorage.removeItem("questions");
                    questions = {};
                    displayQuestions();
                }
            });

            document.getElementById("languageSelect").addEventListener("change", displayQuestions);
            document.getElementById("levelSelect").addEventListener("change", displayQuestions);

            displayQuestions();
        });

        document.addEventListener("contextmenu", (e) => e.preventDefault());
        document.addEventListener("keydown", (e) => {
            if (e.ctrlKey && (e.key === "u" || e.key === "U")) e.preventDefault();
        });
    </script>
</body>
</html>
